<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ><mapper namespace="com.yyan.dao.AuthDao">    <!--插入一个区块-->    <insert id="insertAuth" parameterType="com.yyan.pojo.Auth">        <!-- mysql插入数据后，获取id -->        insert into auth(id,userId,docId, departmentId,state,note,sTime,eTime,createTime,updateTime) values        (uuid(),#{userId},#{docId},#{departmentId},#{state},#{note},#{sTime},#{eTime},now(), now())    </insert>    <!--修改-->    <update id="updateAuth" parameterType="com.yyan.pojo.Auth">        update auth        <set>            <if test="state!=null">state=#{state},</if>            updateTime=now()        </set>        where 1=1 and id = #{id}    </update>    <!--查询条件-->    <sql id="selectListAuthCondition">        <if test="id != null">            and id= #{id}        </if>        <if test="departmentId != null">            and departmentId= #{departmentId}        </if>        <if test="state != null">            and state= #{state}        </if>    </sql>    <!--查询区块-->    <select id="selectListAuth" resultType="java.util.HashMap">        SELECT a.*,        u.name as userName,        d.title as departmentTitle,        do.title as docTitle,        do.abs as docAbs        FROM (          SELECT * FROM auth where 1=1          <include refid="selectListAuthCondition"/>         limit ${pageIndex*size},${(pageIndex+1)*size}        )a LEFT JOIN user u        ON a.userId=u.id        LEFT JOIN department d        ON a.departmentId=d.id        LEFT JOIN doc do        ON a.docId=do.id    </select>    <!--查询数量-->    <select id="countListAuth" resultType="java.lang.Integer">        select count(id) from auth WHERE 1=1        <include refid="selectListAuthCondition"/>    </select></mapper>